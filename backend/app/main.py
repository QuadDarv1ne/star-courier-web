"""
StarCourier Web - FastAPI Backend
–ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π config.py

–ê–≤—Ç–æ—Ä: Dupley Maxim Igorevich
–í–µ—Ä—Å–∏—è: 1.0.0
"""

import logging
from contextlib import asynccontextmanager
from typing import Dict, Optional, List
from datetime import datetime

from fastapi import FastAPI, HTTPException, status
from fastapi.middleware.cors import CORSMiddleware
from fastapi.responses import JSONResponse
from pydantic import BaseModel, Field

# –ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
from config import settings

# ============================================================================
# –õ–û–ì–ò–†–û–í–ê–ù–ò–ï
# ============================================================================

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    level=settings.get_log_level(),
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)

# ============================================================================
# PYDANTIC –ú–û–î–ï–õ–ò
# ============================================================================

class StatUpdate(BaseModel):
    """–ú–æ–¥–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏"""
    health: Optional[int] = 0
    morale: Optional[int] = 0
    knowledge: Optional[int] = 0
    team: Optional[int] = 0
    danger: Optional[int] = 0
    security: Optional[int] = 0
    fuel: Optional[int] = 0
    money: Optional[int] = 0
    psychic: Optional[int] = 0
    trust: Optional[int] = 0


class Choice(BaseModel):
    """–ú–æ–¥–µ–ª—å –≤—ã–±–æ—Ä–∞"""
    text: str = Field(..., description="–¢–µ–∫—Å—Ç –≤—ã–±–æ—Ä–∞")
    next: str = Field(..., description="ID —Å–ª–µ–¥—É—é—â–µ–π —Å—Ü–µ–Ω—ã")
    stats: Optional[Dict[str, int]] = Field(None, description="–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏")
    difficulty: Optional[str] = Field(None, description="–°–ª–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞")


class SceneResponse(BaseModel):
    """–ú–æ–¥–µ–ª—å –æ—Ç–≤–µ—Ç–∞ —Å–æ —Å—Ü–µ–Ω–æ–π"""
    id: str = Field(..., description="ID —Å—Ü–µ–Ω—ã")
    title: str = Field(..., description="–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã")
    text: str = Field(..., description="–¢–µ–∫—Å—Ç —Å—Ü–µ–Ω—ã")
    image: str = Field(..., description="–≠–º–æ–¥–∑–∏ —Å—Ü–µ–Ω—ã")
    character: str = Field(..., description="–ü–µ—Ä—Å–æ–Ω–∞–∂, –≥–æ–≤–æ—Ä—è—â–∏–π –≤ —Å—Ü–µ–Ω–µ")
    choices: List[Choice] = Field(..., description="–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤—ã–±–æ—Ä—ã")


class GameStartRequest(BaseModel):
    """–ú–æ–¥–µ–ª—å –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã"""
    player_id: str = Field(..., description="–£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–≥—Ä–æ–∫–∞")


class GameStartResponse(BaseModel):
    """–ú–æ–¥–µ–ª—å –æ—Ç–≤–µ—Ç–∞ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã"""
    status: str = "success"
    scene: SceneResponse
    stats: Dict[str, int]
    relationships: Dict[str, int]


class GameChoiceRequest(BaseModel):
    """–ú–æ–¥–µ–ª—å –∑–∞–ø—Ä–æ—Å–∞ –≤—ã–±–æ—Ä–∞"""
    player_id: str = Field(..., description="ID –∏–≥—Ä–æ–∫–∞")
    next_scene: str = Field(..., description="ID —Å–ª–µ–¥—É—é—â–µ–π —Å—Ü–µ–Ω—ã")
    stats: Optional[Dict[str, int]] = Field(None, description="–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏")


class GameChoiceResponse(BaseModel):
    """–ú–æ–¥–µ–ª—å –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤—ã–±–æ—Ä"""
    status: str
    scene: Optional[SceneResponse] = None
    stats: Optional[Dict[str, int]] = None
    relationships: Optional[Dict[str, int]] = None
    choices_made: int = 0
    reason: Optional[str] = None


class PlayerStatsResponse(BaseModel):
    """–ú–æ–¥–µ–ª—å –æ—Ç–≤–µ—Ç–∞ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏–≥—Ä–æ–∫–∞"""
    current_scene: str
    stats: Dict[str, int]
    relationships: Dict[str, int]
    inventory: List[str]
    choices_made: int


class CharacterInfo(BaseModel):
    """–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ"""
    id: str
    name: str
    role: str
    relationship: int
    description: str


class HealthCheckResponse(BaseModel):
    """–ú–æ–¥–µ–ª—å health check"""
    status: str
    version: str
    environment: str
    timestamp: str


# ============================================================================
# –î–ê–ù–ù–´–ï –ò–ì
# ============================================================================

# –°—Ü–µ–Ω—ã –∏–≥—Ä—ã
SCENES: Dict[str, dict] = {
    "start": {
        "title": "–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –Ω–∞ –≠–ª–µ–µ",
        "text": "–í—ã ‚Äî –∫–∞–ø–∏—Ç–∞–Ω –ú–∞–∫—Å –í–µ–ª–ª. –ü—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –≤ –∫–∞—é—Ç–µ –∑–≤–µ–∑–¥–æ–ª—ë—Ç–∞ '–≠–ª–µ—è'. –ù–∞ –∫–æ–Ω—Å–æ–ª–∏ –º–∏–≥–∞–µ—Ç –∫—Ä–∞—Å–Ω–∞—è –ª–∞–º–ø–æ—á–∫–∞. –≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–µ—Ä–∞ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ –°–∏–≥–º–∞. –û–Ω –≥–æ–≤–æ—Ä–∏—Ç –æ –¥—Ä–µ–≤–Ω–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–µ, —Å–ø–æ—Å–æ–±–Ω–æ–º –∏–∑–º–µ–Ω–∏—Ç—å —Å—É–¥—å–±—É —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞.\n\n–í–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —É–∂–µ –∂–¥—ë—Ç –ø—Ä–∏–∫–∞–∑–æ–≤ –≤ —Ü–µ–Ω—Ç—Ä–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.",
        "image": "üöÄ",
        "character": "–°–∞—Ä–∞ –ù–æ–≤–∞",
        "choices": [
            {"text": "–°–ø–µ—à–∏—Ç—å –≤ —Ü–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è", "next": "command_center", "stats": {"health": -5, "morale": 10}},
            {"text": "–í–∫–ª—é—á–∏—Ç—å —Å–≤—è–∑—å –∏ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ", "next": "mystery_contact", "stats": {"knowledge": 15, "morale": -5}},
            {"text": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ", "next": "artifact_vault", "stats": {"knowledge": 20}}
        ]
    },
    "command_center": {
        "title": "–¶–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≠–ª–µ–∏",
        "text": "–í —Ü–µ–Ω—Ç—Ä–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—Å –≤—Å—Ç—Ä–µ—á–∞—é—Ç:\n\n‚Ä¢ –°–ê–†–ê –ù–û–í–ê ‚Äî –≥–ª–∞–≤–Ω—ã–π –Ω–∞—É—á–Ω—ã–π –æ—Ñ–∏—Ü–µ—Ä (—Ö–æ–ª–æ–¥–Ω–∞—è, —Ä–∞—Å—á—ë—Ç–ª–∏–≤–∞—è)\n‚Ä¢ –ì–†–ò–®–ê –†–û–ú–ê–ù–û–í ‚Äî –±–æ–µ–≤–æ–π –æ—Ñ–∏—Ü–µ—Ä (–≤–µ—Ä–Ω—ã–π, –æ–ø—ã—Ç–Ω—ã–π)\n‚Ä¢ –õ–ò –ß–ñ–≠–ù–¨ ‚Äî –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä (–∑–∞–≥–∞–¥–æ—á–Ω–∞—è, —Å —Ç–∞–π–Ω–∞–º–∏)\n\n–°–∞—Ä–∞ –¥–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç: '–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –Ω–æ —Å—Ç–∞–Ω—Ü–∏—è –°–∏–≥–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ä–æ—á–Ω—ã–π —Å–∏–≥–Ω–∞–ª. –ß—Ç–æ –≤—ã –ø—Ä–∏–∫–∞–∑—ã–≤–∞–µ—Ç–µ?'",
        "image": "üéÆ",
        "character": "–°–∞—Ä–∞ –ù–æ–≤–∞",
        "choices": [
            {"text": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –Ω–∞ —Å—Ç–∞–Ω—Ü–∏—é –°–∏–≥–º–∞", "next": "sigma_station", "stats": {"fuel": -30, "morale": 20}},
            {"text": "–£—Å–∏–ª–∏—Ç—å –æ—Ö—Ä–∞–Ω—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞", "next": "artifact_guard", "stats": {"security": 25, "morale": 5}},
            {"text": "–°–æ–∑–≤–∞—Ç—å —Å–æ–≤–µ—Ç —ç–∫–∏–ø–∞–∂–∞", "next": "crew_meeting", "stats": {"team": 15}}
        ]
    },
    "mystery_contact": {
        "title": "–ì–æ–ª–æ—Å –≤ —ç—Ñ–∏—Ä–µ",
        "text": "–í—ã –≤–∫–ª—é—á–∞–µ—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–∞–Ω–∞–ª. –ì–æ–ª–æ—Å, —Å–∫—Ä—ã—Ç—ã–π —Ñ–∏–ª—å—Ç—Ä–æ–º:\n\n'–ö–∞–ø–∏—Ç–∞–Ω –í–µ–ª–ª, –≤—Ä–µ–º–µ–Ω–∏ –º–∞–ª–æ. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –≤–µ–∑—ë—Ç–µ ‚Äî —ç—Ç–æ –∫–ª—é—á –∫ –ø–æ—Ä—Ç–∞–º –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏. –û–Ω–∏ —Ö–æ—Ç—è—Ç –µ–≥–æ —É–∫—Ä–∞—Å—Ç—å. –î–æ–≤–µ—Ä—è–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å–µ–±–µ... –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å, –õ–∏ –ß–∂—ç–Ω—å.'\n\n–°–≤—è–∑—å –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è. –ù–∞ —ç–∫—Ä–∞–Ω–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.",
        "image": "üì°",
        "character": "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π",
        "choices": [
            {"text": "–†–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –∑–≤–æ–Ω–∫–µ –°–∞—Ä–µ –∏ –ì—Ä–∏—à–µ", "next": "team_divided", "stats": {"trust": -20, "morale": -10}},
            {"text": "–ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å –Ω–∞–µ–¥–∏–Ω–µ —Å –õ–∏ –ß–∂—ç–Ω—å", "next": "li_zheng_secret", "stats": {"knowledge": 25, "morale": 15}},
            {"text": "–ú–æ–ª—á–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º", "next": "secret_mission", "stats": {"danger": 30}}
        ]
    },
    "artifact_vault": {
        "title": "–•—Ä–∞–Ω–∏–ª–∏—â–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞",
        "text": "–ü–æ–¥–∑–µ–º–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≠–ª–µ–∏. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç —Å–≤–µ—Ç–∏—Ç—Å—è –≥–æ–ª—É–±—ã–º —Å–≤–µ—Ç–æ–º –≤ –º–∞–≥–Ω–∏—Ç–Ω–æ–º –ø–æ–ª–µ.\n\n–≠—Ç–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ—ë –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ. –ù–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –∫—Ä–∏—Å—Ç–∞–ª–ª–∞ ‚Äî —Å—Ç—Ä–∞–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–≤–µ—Ç—è—Ç—Å—è –≤ —Ç–∞–∫—Ç –≤–∞—à–µ–º—É –ø—É–ª—å—Å—É.\n\n–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –≤—ã —Å–ª—ã—à–∏—Ç–µ —à—É–º. –ö—Ç–æ-—Ç–æ –ø—Ä–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ!",
        "image": "üíé",
        "character": "–ê—Ä—Ç–µ—Ñ–∞–∫—Ç",
        "choices": [
            {"text": "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –±–æ–µ–≤—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É", "next": "lockdown_intruder", "stats": {"security": 30, "danger": 20}},
            {"text": "–ö–æ—Å–Ω—É—Ç—å—Å—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –∏ –æ—â—É—Ç–∏—Ç—å –µ–≥–æ —Å–∏–ª—É", "next": "artifact_touch", "stats": {"knowledge": 40, "psychic": 20}},
            {"text": "–í—ã–∑–≤–∞—Ç—å –æ—Ö—Ä–∞–Ω—É –∏ –ø–æ–¥–Ω—è—Ç—å—Å—è –≤ —Ü–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è", "next": "command_center", "stats": {"team": 10}}
        ]
    },
    "sigma_station": {
        "title": "–°—Ç–∞–Ω—Ü–∏—è –°–∏–≥–º–∞-7",
        "text": "–°—Ç–∞–Ω—Ü–∏—è –≤ –ø–æ–ª—É—Å–æ–≥–Ω—É—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –ù–∞ –ø–æ—Ä—Ç–∞–ª–µ –≤–∏—Å—è—Ç —Ä–≤–∞–Ω—ã–µ –ø—Ä–æ–≤–æ–¥–∞ –∏ –æ–±–ª–æ–º–∫–∏ –ø–∞–Ω–µ–ª–µ–π. –ù–µ–º–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –æ—Å—Ç–∞—ë—Ç—Å—è.\n\n–í–∞—Å –≤—Å—Ç—Ä–µ—á–∞–µ—Ç –ö–û–ú–ê–ù–î–ò–† –ö–ï–ô–ù ‚Äî —á–µ–ª–æ–≤–µ–∫ —Å —à—Ä–∞–º–æ–º –Ω–∞ –ª–∏—Ü–µ:\n\n'–í–µ–ª–ª, —Å–ø–∞—Å–∏–±–æ —á—Ç–æ –ø—Ä–∏–µ—Ö–∞–ª–∏. –£ –Ω–∞—Å –ø—Ä–æ–±–ª–µ–º–∞. –ü–∏—Ä–∞—Ç—ã –∏–∑ –∫–ª–∞–Ω–∞ '–ß—ë—Ä–Ω—ã–π –í–æ—Ä–æ–Ω' —Ö–æ—Ç—è—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç. –û–Ω–∏ –ø—Ä–∏–±—ã–≤–∞—é—Ç —á–µ—Ä–µ–∑ 6 —á–∞—Å–æ–≤. –ù–∞–º –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å.'",
        "image": "üõ∏",
        "character": "–ö–æ–º–∞–Ω–¥–∏—Ä –ö–µ–π–Ω",
        "choices": [
            {"text": "–ó–∞—â–∏—Ç–∏—Ç—å —Å—Ç–∞–Ω—Ü–∏—é –≤—Å–µ–º–∏ —Å–∏–ª–∞–º–∏", "next": "defend_station", "stats": {"team": 20, "danger": 40}},
            {"text": "–ó–∞–∫–ª—é—á–∏—Ç—å —Å–¥–µ–ª–∫—É —Å –ø–∏—Ä–∞—Ç–∞–º–∏", "next": "pirate_deal", "stats": {"money": 50, "morale": -30, "trust": -25}},
            {"text": "–≠–≤–∞–∫—É–∏—Ä–æ–≤–∞—Ç—å –∏ —É–π—Ç–∏", "next": "evacuate", "stats": {"morale": -20, "fuel": -40}}
        ]
    },
    "li_zheng_secret": {
        "title": "–¢–∞–π–Ω–∞ –õ–∏ –ß–∂—ç–Ω—å",
        "text": "–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ –õ–∏ –≤ –µ—ë –∫–∞—é—Ç–µ, –ø–æ–∫—Ä—ã—Ç–æ–π –¥—Ä–µ–≤–Ω–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏ –∏ —Å–∏–º–≤–æ–ª–∞–º–∏, –ø–æ—Ö–æ–∂–∏–º–∏ –Ω–∞ —Ç–µ, —á—Ç–æ –Ω–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–µ.\n\n–õ–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è: '–Ø –∑–Ω–∞–ª–∞, —á—Ç–æ –≤—ã –ø–æ–∑–≤–æ–Ω–∏—Ç–µ, –ú–∞–∫—Å. –ú–Ω–µ –Ω—É–∂–Ω–æ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –≤–∞–º –∏—Å—Ç–∏–Ω—É. –Ø –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä. –Ø ‚Äî –ø–æ—Å–ª–µ–¥–Ω—è—è —Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –¥—Ä–µ–≤–Ω–µ–≥–æ –æ—Ä–¥–µ–Ω–∞. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç ‚Äî —ç—Ç–æ —á–∞—Å—Ç—å —á–µ–≥–æ-—Ç–æ –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ–≥–æ.'",
        "image": "üß≠",
        "character": "–õ–∏ –ß–∂—ç–Ω—å",
        "choices": [
            {"text": "–ü–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–≤–µ—Ä–∏—Ç—å –µ–π", "next": "li_alliance", "stats": {"trust": 40, "knowledge": 30, "morale": 20}},
            {"text": "–¢—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –ø—Ä–∞–≤–¥—É", "next": "li_confrontation", "stats": {"knowledge": 25, "trust": -15}},
            {"text": "–£–π—Ç–∏ –∏ –¥–æ–ª–æ–∂–∏—Ç—å –∫–æ–º–∞–Ω–¥–µ", "next": "team_divided", "stats": {"trust": -30}}
        ]
    },
    "li_alliance": {
        "title": "–°–æ—é–∑ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–∞",
        "text": "–õ–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞–º –¥—Ä–µ–≤–Ω–∏–µ –∑–∞–ø–∏—Å–∏. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç ‚Äî —ç—Ç–æ –∫–ª—é—á –∫ –≥–∞–ª–∞–∫—Ç–∏–∫–µ –î—Ä–µ–≤–Ω–∏—Ö, –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–∏, –∏—Å—á–µ–∑–Ω—É–≤—à–µ–π 10000 –ª–µ—Ç –Ω–∞–∑–∞–¥.\n\n'–ú–∞–∫—Å, –æ–Ω–∏ –≤–µ—Ä–Ω—É—Ç—Å—è. –ò –∫–æ–≥–¥–∞ —ç—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –±—É–¥—É—Ç –¥–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã ‚Äî —Ç–µ, –∫—Ç–æ —Ö–æ—á–µ—Ç —Å–ø–∞—Å—Ç–∏ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–æ, –∏ —Ç–µ, –∫—Ç–æ —Ö–æ—á–µ—Ç –∑–∞–≤–æ–µ–≤–∞—Ç—å. –í—ã–±–æ—Ä –∑–∞ –≤–∞–º–∏.'",
        "image": "‚ú®",
        "character": "–õ–∏ –ß–∂—ç–Ω—å",
        "choices": [
            {"text": "–ù–∞—á–∞—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∫ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—é –î—Ä–µ–≤–Ω–∏—Ö", "next": "ancient_awakening", "stats": {"knowledge": 50, "danger": 50}},
            {"text": "–°–∫—Ä—ã—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ", "next": "hide_artifact", "stats": {"morale": -10, "security": 40}},
            {"text": "–£–Ω–∏—á—Ç–æ–∂–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç", "next": "artifact_destruction", "stats": {"morale": -40, "knowledge": -30}}
        ]
    },
    "ancient_awakening": {
        "title": "üå† –ö–û–ù–ï–¶: –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –î—Ä–µ–≤–Ω–∏—Ö",
        "text": "–í—ã –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç. –ì–æ–ª—É–±–æ–π —Å–≤–µ—Ç –Ω–∞–ø–æ–ª–Ω—è–µ—Ç –∫–æ—Å–º–æ—Å.\n\n–ó–≤–µ–∑–¥–æ–ª—ë—Ç –≠–ª–µ—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è. –°—Ç–µ–Ω—ã —Å–≤–µ—Ç—è—Ç—Å—è —Å–∏–º–≤–æ–ª–∞–º–∏, –≤–∫–ª—é—á–∞—é—Ç—Å—è –¥—Ä–µ–≤–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏. –í–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–º–æ—Ç—Ä–∏—Ç –≤ –≤–æ—Å—Ö–∏—â–µ–Ω–∏–∏.\n\n–õ–∏ –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç –¥—Ä–µ–≤–Ω–∏–µ —Å–ª–æ–≤–∞, –∏ –≤ –Ω–µ–±–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ–≥—Ä–æ–º–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –º–µ–≥–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –î—Ä–µ–≤–Ω–∏—Ö, –ø—Ä–æ–±—É–∂–¥–∞—é—â–∞—è—Å—è –ø–æ—Å–ª–µ —Ç—ã—Å—è—á–µ–ª–µ—Ç–∏–π.\n\n–í—ã ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–∞–ø–∏—Ç–∞–Ω. –í—ã ‚Äî —Ç–æ—Ç, –∫—Ç–æ –ø—Ä–∏–≤—ë–ª —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–æ –≤ –Ω–æ–≤—É—é —ç—Ä—É.",
        "image": "üëë",
        "character": "–°—É–¥—å–±–∞",
        "choices": [
            {"text": "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ", "next": "start"}
        ]
    },
    "hide_artifact": {
        "title": "üîí –ö–û–ù–ï–¶: –•—Ä–∞–Ω–∏—Ç–µ–ª—å —Å–µ–∫—Ä–µ—Ç–æ–≤",
        "text": "–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ –¥—Ä–µ–≤–Ω—é—é –ø–ª–∞–Ω–µ—Ç—É, –∂–∏–∑–Ω–∏ –Ω–∞ –Ω–µ–π –Ω–µ—Ç. –í—ã –æ—Å—Ç–∞–≤–ª—è–µ—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ –ø–æ–¥–∑–µ–º–µ–ª—å–µ, –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –∫–æ–¥–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ –õ–∏.\n\n–°–µ—Ä–∞, –ì—Ä–∏—à–∞ –∏ –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤–µ—Ä—è—Ç –≤–∞–º. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.\n\n–í—ã ‚Äî —Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –≤–µ–ª–∏—á–∞–π—à–µ–π —Ç–∞–π–Ω—ã –í—Å–µ–ª–µ–Ω–Ω–æ–π.",
        "image": "üóùÔ∏è",
        "character": "–°–µ–∫—Ä–µ—Ç",
        "choices": [
            {"text": "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ", "next": "start"}
        ]
    },
    "artifact_destruction": {
        "title": "üí• –ö–û–ù–ï–¶: –ñ–µ—Ä—Ç–≤–∞",
        "text": "–ê—Ä—Ç–µ—Ñ–∞–∫—Ç —Ä–∞–∑—Ä—É—à–∞–µ—Ç—Å—è –≤ –æ—Å–ª–µ–ø–∏—Ç–µ–ª—å–Ω–æ–π –≤—Å–ø—ã—à–∫–µ.\n\n–í—Å–µ–ª–µ–Ω–Ω–∞—è —Å–æ–¥—Ä–æ–≥–∞–µ—Ç—Å—è. –î—Ä–µ–≤–Ω–∏–µ –Ω–µ –ø—Ä–æ–±—É–∂–¥–∞—é—Ç—Å—è.\n\n–ù–æ –õ–∏ –ø–∞–¥–∞–µ—Ç –Ω–∞ –∫–æ–ª–µ–Ω–∏: '–í—ã —É–Ω–∏—á—Ç–æ–∂–∏–ª–∏ –±–µ—Å—Å–º–µ—Ä—Ç–∏–µ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞...'\n\n–í—ã —Å–ø–∞—Å–∏–ª–∏ –º–∏—Ä –æ—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ, –Ω–æ –ø–æ—Ç–µ—Ä—è–ª–∏ –±–µ—Å—Ü–µ–Ω–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç.",
        "image": "‚ö°",
        "character": "–ñ–µ—Ä—Ç–≤–∞",
        "choices": [
            {"text": "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ", "next": "start"}
        ]
    },
    "defend_station": {
        "title": "‚öîÔ∏è –ö–û–ù–ï–¶: –ë–æ–µ–≤–∞—è –ø–æ–±–µ–¥–∞",
        "text": "–í–∞—à–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ. –ü–∏—Ä–∞—Ç—ã –æ—Ç—Å—Ç—É–ø–∞—é—Ç –≤ –ø–∞–Ω–∏–∫–µ.\n\n–ì—Ä–∏—à–∞ –ø–æ–∂–∏–º–∞–µ—Ç –≤–∞–º —Ä—É–∫—É: '–ë–ª–µ—Å—Ç—è—â–∞—è —Ç–∞–∫—Ç–∏–∫–∞, –∫–∞–ø–∏—Ç–∞–Ω. –ú—ã –ø–æ–±–µ–¥–∏–ª–∏.'\n\n–ö–æ–º–∞–Ω–¥–∏—Ä –ö–µ–π–Ω: '–í—ã —Å–ø–∞—Å–∏–ª–∏ —Å—Ç–∞–Ω—Ü–∏—é –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç. –ß–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–æ –≤–∞–º –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ.'",
        "image": "üèÜ",
        "character": "–ì–µ—Ä–æ–π",
        "choices": [
            {"text": "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ", "next": "start"}
        ]
    },
    "artifact_guard": {
        "title": "–û—Ö—Ä–∞–Ω–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞",
        "text": "–í—ã –ø—Ä–∏–∫–∞–∑—ã–≤–∞–µ—Ç–µ —É—Å–∏–ª–∏—Ç—å –æ—Ö—Ä–∞–Ω—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞. –ì—Ä–∏—à–∞ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—É–¥–∞ –¥–≤—É—Ö –±–æ–π—Ü–æ–≤, –∞ –°–∞—Ä–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä—ã.\n\n–í–Ω–µ–∑–∞–ø–Ω–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è. –ö—Ç–æ-—Ç–æ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–Ω–∏–∫–Ω—É—Ç—å –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ! –í—ã —Å–ø–µ—à–∏—Ç–µ –Ω–∞ –º–µ—Å—Ç–æ –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è.",
        "image": "üõ°Ô∏è",
        "character": "–ì—Ä–∏—à–∞ –†–æ–º–∞–Ω–æ–≤",
        "choices": [
            {"text": "–û—Ç–∫—Ä—ã—Ç—å –æ–≥–æ–Ω—å –Ω–∞ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ", "next": "lockdown_intruder", "stats": {"security": 20, "danger": 30}},
            {"text": "–ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –≤—Ä–∞–≥–∞ –∂–∏–≤—ã–º", "next": "capture_intruder", "stats": {"knowledge": 25, "danger": 15}},
            {"text": "–û—Ç—Å—Ç—É–ø–∏—Ç—å –∏ –≤—ã–∑–≤–∞—Ç—å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ", "next": "reinforcements", "stats": {"team": 10, "danger": -10}}
        ]
    },
    "crew_meeting": {
        "title": "–°–æ–≤–µ—Ç —ç–∫–∏–ø–∞–∂–∞",
        "text": "–í—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ –≤—Å–µ—Ö —á–ª–µ–Ω–æ–≤ —ç–∫–∏–ø–∞–∂–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –ö–∞–∂–¥—ã–π –≤—ã—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ—ë –º–Ω–µ–Ω–∏–µ –æ —Å–∏—Ç—É–∞—Ü–∏–∏.\n\n–°–∞—Ä–∞: '–ù–∞—É—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.'\n\n–ì—Ä–∏—à–∞: '–ù–∞–º –Ω—É–∂–Ω–æ –±—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º–∏ –∫ –ª—é–±–æ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é —Å–æ–±—ã—Ç–∏–π. –Ø –ø—Ä–µ–¥–ª–∞–≥–∞—é —É—Å–∏–ª–∏—Ç—å –æ—Ö—Ä–∞–Ω—É.'\n\n–õ–∏: '–Ø —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –∑–∞ –Ω–∞–º–∏ –Ω–∞–±–ª—é–¥–∞—é—Ç. –ú—ã –¥–æ–ª–∂–Ω—ã –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –±—ã—Å—Ç—Ä–æ –∏ —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ.'",
        "image": "üë•",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –ú–∞–∫—Å –í–µ–ª–ª",
        "choices": [
            {"text": "–°–ª–µ–¥–æ–≤–∞—Ç—å —Å–æ–≤–µ—Ç—É –°–∞—Ä—ã", "next": "follow_sara_advice", "stats": {"knowledge": 20, "morale": 10}},
            {"text": "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ì—Ä–∏—à—É", "next": "support_grisha", "stats": {"team": 20, "security": 15}},
            {"text": "–î–æ–≤–µ—Ä–∏—Ç—å—Å—è –∏–Ω—Ç—É–∏—Ü–∏–∏ –õ–∏", "next": "trust_li", "stats": {"psychic": 25, "danger": 10}}
        ]
    },
    "team_divided": {
        "title": "–†–∞–∑–¥–æ—Ä –≤ –∫–æ–º–∞–Ω–¥–µ",
        "text": "–í–∞—à–∏ —Å–ª–æ–≤–∞ –≤—ã–∑—ã–≤–∞—é—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤ –∫–æ–º–∞–Ω–¥–µ. –°–∞—Ä–∞ —Å –Ω–µ–¥–æ–≤–µ—Ä–∏–µ–º —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –≤–∞—Å, –ì—Ä–∏—à–∞ —Ö–º—É—Ä–∏—Ç—Å—è, –∞ –õ–∏ –∫–∞–∂–µ—Ç—Å—è –æ–±–µ—Å–ø–æ–∫–æ–µ–Ω–Ω–æ–π.\n\n–°–∞—Ä–∞: '–í—ã –Ω–µ –¥–æ–≤–µ—Ä—è–µ—Ç–µ –º–Ω–µ, –∫–∞–ø–∏—Ç–∞–Ω? –Ø –∑–Ω–∞—é, —á—Ç–æ –¥–µ–ª–∞—é!'\n\n–ì—Ä–∏—à–∞: '–ï—Å–ª–∏ —É –∫–∞–ø–∏—Ç–∞–Ω–∞ –µ—Å—Ç—å —Å–æ–º–Ω–µ–Ω–∏—è, –∑–Ω–∞—á–∏—Ç, –µ—Å—Ç—å –ø—Ä–∏—á–∏–Ω–∞ –¥–ª—è –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–∞.'\n\n–õ–∏: '–ú–æ–∂–µ—Ç –±—ã—Ç—å, –Ω–∞–º —Å—Ç–æ–∏—Ç –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å –æ–± —ç—Ç–æ–º –Ω–∞–µ–¥–∏–Ω–µ...'\n\n–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –Ω–∞–∫–∞–ª—è–µ—Ç—Å—è.",
        "image": "üò¨",
        "character": "–≠–∫–∏–ø–∞–∂",
        "choices": [
            {"text": "–ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø—Ä–∏–º–∏—Ä–∏—Ç—å –∫–æ–º–∞–Ω–¥—É", "next": "reconcile_crew", "stats": {"team": 15, "morale": 10}},
            {"text": "–ü—Ä–∏–Ω—è—Ç—å –∂—ë—Å—Ç–∫—É—é –ø–æ–∑–∏—Ü–∏—é", "next": "take_firm_stance", "stats": {"morale": -15, "team": -10}},
            {"text": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –ø–æ –ø–æ—Å—Ç–∞–º", "next": "send_to_posts", "stats": {"security": 20, "team": -20}}
        ]
    },
    "secret_mission": {
        "title": "–°–µ–∫—Ä–µ—Ç–Ω–∞—è –º–∏—Å—Å–∏—è",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º –≤ —Ç–∞–π–Ω–µ –æ—Ç –∫–æ–º–∞–Ω–¥—ã. –£—Å—Ç–∞–Ω–æ–≤–∏–≤ –∫—É—Ä—Å, –≤—ã –ø–æ–∫–∏–¥–∞–µ—Ç–µ —Å—Ç–∞–Ω—Ü–∏—é –≠–ª–µ—è.\n\n–ü–æ–∫–∞ –≤—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤—É–µ—Ç–µ —á–µ—Ä–µ–∑ —Å–µ–∫—Ç–æ—Ä, –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏. –í–Ω–µ–∑–∞–ø–Ω–æ –∫–æ—Ä–∞–±–ª—å —Å–æ—Ç—Ä—è—Å–∞–µ—Ç –º–æ—â–Ω—ã–π —Ç–æ–ª—á–æ–∫.\n\n–¢—Ä–µ–≤–æ–≥–∞! –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ –∑–≤–µ–∑–¥–æ–ª—ë—Ç—É.",
        "image": "üõ∏",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –ú–∞–∫—Å –í–µ–ª–ª",
        "choices": [
            {"text": "–ü–æ–¥–Ω—è—Ç—å –±–æ–µ–≤—É—é –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å", "next": "battle_stations", "stats": {"security": 25, "danger": 20}},
            {"text": "–ü–æ–ø—ã—Ç–∞—Ç—å—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç", "next": "establish_contact", "stats": {"knowledge": 20, "danger": -10}},
            {"text": "–°–∫—Ä—ã—Ç—å—Å—è –≤ –≥–∏–ø–µ—Ä–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ", "next": "hyperspace_escape", "stats": {"fuel": -30, "danger": -20}}
        ]
    },
    "lockdown_intruder": {
        "title": "–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è",
        "text": "–í—ã –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç–µ –±–æ–µ–≤—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –°—Ç–µ–Ω—ã –∑–∞–≥–æ—Ä–∞–∂–∏–≤–∞—é—Ç—Å—è –ø—Ä–æ—á–Ω—ã–º–∏ —â–∏—Ç–∞–º–∏, –∞ —Å–µ–Ω—Å–æ—Ä—ã —Å–∫–∞–Ω–∏—Ä—É—é—Ç –∫–∞–∂–¥–æ–≥–æ, –∫—Ç–æ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–π—Ç–∏.\n\n–í–Ω–µ–∑–∞–ø–Ω–æ —Ä–∞–∑–¥–∞—ë—Ç—Å—è –≤—ã—Å—Ç—Ä–µ–ª. –ö—Ç–æ-—Ç–æ –∞—Ç–∞–∫—É–µ—Ç —Å–Ω–∞—Ä—É–∂–∏! –û—Ö—Ä–∞–Ω–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç–Ω—ã–π –æ–≥–æ–Ω—å.",
        "image": "üî´",
        "character": "–°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
        "choices": [
            {"text": "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –æ–±–æ—Ä–æ–Ω–µ", "next": "join_defense", "stats": {"security": 20, "danger": 15}},
            {"text": "–ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ–±–æ–π—Ç–∏ –∞—Ç–∞–∫—É—é—â–∏—Ö —Å —Ç—ã–ª–∞", "next": "flank_attackers", "stats": {"team": 15, "danger": 10}},
            {"text": "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–≤–∞—Ä–∏–π–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª", "next": "emergency_protocol", "stats": {"knowledge": 25, "danger": -15}}
        ]
    },
    "artifact_touch": {
        "title": "–ü—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ –∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É",
        "text": "–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –æ–ø–∞—Å–Ω–æ—Å—Ç—å, –≤—ã —Ä–µ—à–∞–µ—Ç–µ –∫–æ—Å–Ω—É—Ç—å—Å—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞. –í –º–æ–º–µ–Ω—Ç –∫–æ–Ω—Ç–∞–∫—Ç–∞ –≤–∞—à —Ä–∞–∑—É–º –Ω–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–∏–¥–µ–Ω–∏—è–º–∏ –¥—Ä–µ–≤–Ω–∏—Ö —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–π, –º–µ–∂–∑–≤—ë–∑–¥–Ω—ã—Ö –≤–æ–π–Ω –∏ –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.\n\n–í—ã –≤–∏–¥–∏—Ç–µ, –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç–∞–ª—ã –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏, –Ω–æ —Ç–∞–∫–∂–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ –æ–Ω –º–æ–∂–µ—Ç —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å, –µ—Å–ª–∏ –±—É–¥–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω.",
        "image": "‚ö°",
        "character": "–ê—Ä—Ç–µ—Ñ–∞–∫—Ç",
        "choices": [
            {"text": "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤–∏–¥–µ–Ω–∏—è–º–∏ —Å –∫–æ–º–∞–Ω–¥–æ–π", "next": "share_visions", "stats": {"knowledge": 30, "team": 20}},
            {"text": "–°–∫—Ä—ã—Ç—å –∑–Ω–∞–Ω–∏—è", "next": "hide_knowledge", "stats": {"psychic": 25, "trust": -15}},
            {"text": "–ò–∑—É—á–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –¥–∞–ª—å—à–µ", "next": "study_artifact", "stats": {"knowledge": 40, "danger": 20}}
        ]
    },
    "pirate_deal": {
        "title": "–°–¥–µ–ª–∫–∞ —Å –ø–∏—Ä–∞—Ç–∞–º–∏",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –∑–∞–∫–ª—é—á–∏—Ç—å —Å–¥–µ–ª–∫—É —Å –∫–ª–∞–Ω–æ–º '–ß—ë—Ä–Ω—ã–π –í–æ—Ä–æ–Ω'. –ö–æ–º–∞–Ω–¥–∏—Ä –ö–µ–π–Ω –Ω–µ–¥–æ–≤–æ–ª–µ–Ω, –Ω–æ —Å–æ–≥–ª–∞—à–∞–µ—Ç—Å—è.\n\n–ü–∏—Ä–∞—Ç—Å–∫–∏–π –ª–∏–¥–µ—Ä, –∫–∞–ø–∏—Ç–∞–Ω –†–æ–∫—Å, –ø—Ä–∏–±—ã–≤–∞–µ—Ç —Å –¥–µ–ª–µ–≥–∞—Ü–∏–µ–π. –ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–µ, –Ω–æ –≤ –∏—Ç–æ–≥–µ –≤—ã—Ö–æ–¥–∏—Ç –≤—ã–≥–æ–¥–Ω–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ.\n\n–ü–∏—Ä–∞—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —á–∞—Å—Ç—å –≥—Ä—É–∑–∞, –∞ –≤—ã ‚Äî –∏—Ö –ø–æ–º–æ—â—å –≤ –∑–∞—â–∏—Ç–µ —Å—Ç–∞–Ω—Ü–∏–∏. –û–¥–Ω–∞–∫–æ –≤–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –≤–∞—Å —Å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ–º.",
        "image": "ü§ù",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –†–æ–∫—Å",
        "choices": [
            {"text": "–î–æ–≤–µ—Ä–∏—Ç—å—Å—è –ø–∏—Ä–∞—Ç–∞–º", "next": "trust_pirates", "stats": {"money": 30, "danger": -20}},
            {"text": "–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É", "next": "prepare_betrayal", "stats": {"security": 30, "trust": -25}},
            {"text": "–ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–¥–µ–ª–∫—É", "next": "reconsider_deal", "stats": {"team": 15, "morale": 10}}
        ]
    },
    "evacuate": {
        "title": "–≠–≤–∞–∫—É–∞—Ü–∏—è",
        "text": "–í—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —Ä–µ—à–µ–Ω–∏–µ –æ–± —ç–≤–∞–∫—É–∞—Ü–∏–∏ —Å—Ç–∞–Ω—Ü–∏–∏ –°–∏–≥–º–∞-7. –ö–æ–º–∞–Ω–¥–∏—Ä –ö–µ–π–Ω –ø—Ä–æ—Ç–µ—Å—Ç—É–µ—Ç, –Ω–æ –≤—ã –Ω–∞—Å—Ç–∞–∏–≤–∞–µ—Ç–µ.\n\n–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–µ –Ω–∞—á–∏–Ω–∞—é—Ç –ø–æ–∫–∏–¥–∞—Ç—å —Å—Ç–∞–Ω—Ü–∏—é. –í —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –ø–æ—Å—Ç—É–ø–∞–µ—Ç —Ç—Ä–µ–≤–æ–∂–Ω—ã–π —Å–∏–≥–Ω–∞–ª ‚Äî –ø–∏—Ä–∞—Ç—Å–∫–∏–π —Ñ–ª–æ—Ç –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è!\n\n–£ –≤–∞—Å –µ—Å—Ç—å –≤—Å–µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç, —á—Ç–æ–±—ã –ø—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ.",
        "image": "üö®",
        "character": "–°–∏—Å—Ç–µ–º–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è",
        "choices": [
            {"text": "–£—Å–∫–æ—Ä–∏—Ç—å —ç–≤–∞–∫—É–∞—Ü–∏—é", "next": "hurry_evacuation", "stats": {"fuel": -20, "morale": -15}},
            {"text": "–û—Å—Ç–∞—Ç—å—Å—è –∏ —Å—Ä–∞–∂–∞—Ç—å—Å—è", "next": "stay_and_fight", "stats": {"team": 30, "danger": 40}},
            {"text": "–ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è", "next": "negotiate", "stats": {"knowledge": 20, "danger": -10}}
        ]
    },
    "li_confrontation": {
        "title": "–ö–æ–Ω—Ñ—Ä–æ–Ω—Ç–∞—Ü–∏—è —Å –õ–∏",
        "text": "–í—ã —Ç—Ä–µ–±—É–µ—Ç–µ –æ—Ç –õ–∏ –ø–æ–ª–Ω–æ–π –ø—Ä–∞–≤–¥—ã. –û–Ω–∞ –≤–∑–¥—ã—Ö–∞–µ—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞–º –¥—Ä–µ–≤–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –Ω–∞ —Å–≤–æ–µ–π —à–µ–µ ‚Äî —Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ —Ç–æ—Ç, —á—Ç–æ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.\n\n'–Ø ‚Äî –ø–æ—Å–ª–µ–¥–Ω—è—è –∏–∑ –•—Ä–∞–Ω–∏—Ç–µ–ª–µ–π. –ú–æ—è –º–∏—Å—Å–∏—è ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –î—Ä–µ–≤–Ω–∏—Ö. –ù–æ –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Å—ë.'\n\n–û–Ω–∞ –ø—Ä–æ—Ç—è–≥–∏–≤–∞–µ—Ç –≤–∞–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç. –ß—Ç–æ –≤—ã —Å–¥–µ–ª–∞–µ—Ç–µ?",
        "image": "üîÆ",
        "character": "–õ–∏ –ß–∂—ç–Ω—å",
        "choices": [
            {"text": "–í–∑—è—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç", "next": "take_artifact", "stats": {"knowledge": 35, "psychic": 25}},
            {"text": "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è", "next": "refuse_artifact", "stats": {"morale": 20, "trust": 30}},
            {"text": "–°–æ–≤–µ—Ç–æ–≤–∞—Ç—å—Å—è —Å –∫–æ–º–∞–Ω–¥–æ–π", "next": "consult_crew", "stats": {"team": 25, "knowledge": 15}}
        ]
    },
    "capture_intruder": {
        "title": "–ó–∞—Ö–≤–∞—Ç –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–∞",
        "text": "–í–∞—à–∏ –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–∞ –∂–∏–≤—ã–º. –≠—Ç–æ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∞–≥–µ–Ω—Ç –∫–ª–∞–Ω–∞ '–ß—ë—Ä–Ω—ã–π –í–æ—Ä–æ–Ω', –∫–æ—Ç–æ—Ä—ã–π –ø—ã—Ç–∞–ª—Å—è —É–∫—Ä–∞—Å—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç.\n\n–ü–æ–¥ –¥–æ–ø—Ä–æ—Å–æ–º –æ–Ω —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –ø–ª–∞–Ω—ã –ø–∏—Ä–∞—Ç–æ–≤ ‚Äî –æ–Ω–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∞—Ç–∞–∫–æ–≤–∞—Ç—å —Å—Ç–∞–Ω—Ü–∏—é –°–∏–≥–º–∞-7 —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤.\n\n–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –Ω–∞–ø–∞–¥–µ–Ω–∏—é.",
        "image": "‰∏∫ÊäìÊçï",
        "character": "–ì—Ä–∏—à–∞ –†–æ–º–∞–Ω–æ–≤",
        "choices": [
            {"text": "–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –Ω–∞ –°–∏–≥–º—É", "next": "sigma_station", "stats": {"fuel": -20, "morale": 25}},
            {"text": "–£—Å–∏–ª–∏—Ç—å –∑–∞—â–∏—Ç—É –≠–ª–µ–∏", "next": "artifact_guard", "stats": {"security": 30, "danger": -15}},
            {"text": "–°–æ–∑–≤–∞—Ç—å —Å–æ–≤–µ—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", "next": "crew_meeting", "stats": {"team": 20, "knowledge": 15}}
        ]
    },
    "reinforcements": {
        "title": "–ü–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –æ—Ç—Å—Ç—É–ø–∏—Ç—å –∏ –≤—ã–∑–≤–∞—Ç—å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ. –í—Å–∫–æ—Ä–µ –ø—Ä–∏–±—ã–≤–∞–µ—Ç –≥—Ä—É–ø–ø–∞ –±–æ–µ–≤—ã—Ö –æ—Ñ–∏—Ü–µ—Ä–æ–≤ –ø–æ–¥ –∫–æ–º–∞–Ω–¥–æ–≤–∞–Ω–∏–µ–º –ì—Ä–∏—à–∏.\n\n–í–º–µ—Å—Ç–µ –≤—ã —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –ø–ª–∞–Ω –ø–æ –∑–∞—â–∏—Ç–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –°–∞—Ä–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–≤—É—à–∫–∏, –∞ –õ–∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–∂–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ —â–∏—Ç—ã.",
        "image": "Êè¥ÂÜõ",
        "character": "–ì—Ä–∏—à–∞ –†–æ–º–∞–Ω–æ–≤",
        "choices": [
            {"text": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–Ω –°–∞—Ä—ã", "next": "sara_plan", "stats": {"knowledge": 25, "security": 20}},
            {"text": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–Ω –õ–∏", "next": "li_plan", "stats": {"psychic": 30, "danger": -20}},
            {"text": "–°–æ–∑–¥–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–ª–∞–Ω", "next": "hybrid_plan", "stats": {"team": 25, "knowledge": 20}}
        ]
    },
    "follow_sara_advice": {
        "title": "–ù–∞—É—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ —Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞—É—á–Ω–æ–º—É –∞–Ω–∞–ª–∏–∑—É –°–∞—Ä—ã. –û–Ω–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∏–∑—É—á–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –µ–≥–æ –∏—Å—Ç–∏–Ω–Ω—É—é –ø—Ä–∏—Ä–æ–¥—É.\n\n–í –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ –°–∞—Ä–∞ –ø—Ä–æ–≤–æ–¥–∏—Ç —Å–ª–æ–∂–Ω—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã.",
        "image": "üî¨",
        "character": "–°–∞—Ä–∞ –ù–æ–≤–∞",
        "choices": [
            {"text": "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫—É—é —Å–≤—è–∑—å", "next": "biological_link", "stats": {"knowledge": 35, "psychic": 20}},
            {"text": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–∏–ø–æ—Ç–µ–∑—É –õ–∏", "next": "li_hypothesis", "stats": {"psychic": 25, "knowledge": 15}},
            {"text": "–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç", "next": "isolate_artifact", "stats": {"security": 30, "danger": -15}}
        ]
    },
    "support_grisha": {
        "title": "–í–æ–µ–Ω–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å",
        "text": "–í—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ì—Ä–∏—à–∏ —É—Å–∏–ª–∏—Ç—å –æ—Ö—Ä–∞–Ω—É. –û–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.\n\n–ü–æ—Å—Ç—ã —É–∫—Ä–µ–ø–ª–µ–Ω—ã, –ø–∞—Ç—Ä—É–ª–∏ —É–¥–≤–æ–µ–Ω—ã, –∞ —Å–∏—Å—Ç–µ–º–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –≤ –±–æ–µ–≤–æ–π —Ä–µ–∂–∏–º. –≠–ª–µ—è —Ç–µ–ø–µ—Ä—å –ø–æ—Ö–æ–∂–∞ –Ω–∞ –≤–æ–µ–Ω–Ω—ã–π –∫–æ—Ä–∞–±–ª—å.",
        "image": "üéñÔ∏è",
        "character": "–ì—Ä–∏—à–∞ –†–æ–º–∞–Ω–æ–≤",
        "choices": [
            {"text": "–ü—Ä–æ–≤–µ—Å—Ç–∏ —É—á–µ–Ω–∏—è", "next": "conduct_drills", "stats": {"team": 25, "security": 20}},
            {"text": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ", "next": "check_equipment", "stats": {"knowledge": 20, "security": 15}},
            {"text": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞–∑–≤–µ–¥—á–∏–∫–æ–≤", "next": "send_scouts", "stats": {"knowledge": 30, "danger": 10}}
        ]
    },
    "trust_li": {
        "title": "–ò–Ω—Ç—É–∏—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–∞",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –¥–æ–≤–µ—Ä–∏—Ç—å—Å—è –∏–Ω—Ç—É–∏—Ü–∏–∏ –õ–∏. –û–Ω–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ —Å–µ–∫—Ç–æ—Ä –¢–µ—Ç–∞-7, –≥–¥–µ, –ø–æ –µ—ë –æ—â—É—â–µ–Ω–∏—è–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–ª—é—á –∫ —Ä–∞–∑–≥–∞–¥–∫–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞.\n\n–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –∑–∞–π–º—ë—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤, –Ω–æ –õ–∏ —É–≤–µ—Ä–µ–Ω–∞, —á—Ç–æ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –í –∫–æ—Å–º–æ—Å–µ –≤–∞—Å –∂–¥—É—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç–∏—è.",
        "image": "üß≠",
        "character": "–õ–∏ –ß–∂—ç–Ω—å",
        "choices": [
            {"text": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ —Å–µ–∫—Ç–æ—Ä –¢–µ—Ç–∞-7", "next": "theta_seven", "stats": {"fuel": -25, "psychic": 30}},
            {"text": "–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –°–∞—Ä–æ–π", "next": "consult_sara", "stats": {"knowledge": 20, "psychic": 15}},
            {"text": "–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–ª–∞–Ω –ë", "next": "backup_plan", "stats": {"knowledge": 25, "security": 20}}
        ]
    },
    "reconcile_crew": {
        "title": "–ü—Ä–∏–º–∏—Ä–µ–Ω–∏–µ",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –ø—Ä–∏–º–∏—Ä–∏—Ç—å –∫–æ–º–∞–Ω–¥—É. –£—Å—Ç—Ä–æ–∏–≤ –æ—Ç–∫—Ä–æ–≤–µ–Ω–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä, –≤—ã –≤—ã—Å–ª—É—à–∏–≤–∞–µ—Ç–µ –æ–ø–∞—Å–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ.\n\n–°–∞—Ä–∞ –ø—Ä–∏–∑–Ω–∞—ë—Ç—Å—è, —á—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—Ç –¥–∞–≤–ª–µ–Ω–∏–µ –∏–∑-–∑–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç. –ì—Ä–∏—à–∞ –±–µ—Å–ø–æ–∫–æ–∏—Ç—Å—è –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—ã. –õ–∏ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–¥—É —Ä–∞–¥–∏ –∏—Ö –∂–µ –±–ª–∞–≥–∞.\n\n–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Å–ø–∞–¥–∞–µ—Ç.",
        "image": "ü§ù",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –ú–∞–∫—Å –í–µ–ª–ª",
        "choices": [
            {"text": "–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏", "next": "assign_duties", "stats": {"team": 30, "morale": 25}},
            {"text": "–û–±—ä–µ–¥–∏–Ω–∏—Ç—å —É—Å–∏–ª–∏—è", "next": "unite_efforts", "stats": {"team": 35, "knowledge": 20}},
            {"text": "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–≤–µ—Ä–∏–µ", "next": "build_trust", "stats": {"trust": 40, "morale": 20}}
        ]
    },
    "take_firm_stance": {
        "title": "–ñ—ë—Å—Ç–∫–∞—è –ø–æ–∑–∏—Ü–∏—è",
        "text": "–í—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ –∂—ë—Å—Ç–∫—É—é –ø–æ–∑–∏—Ü–∏—é, —Ç—Ä–µ–±—É—è –±–µ—Å–ø—Ä–µ–∫–æ—Å–ª–æ–≤–Ω–æ–≥–æ –ø–æ–¥—á–∏–Ω–µ–Ω–∏—è. –ö–æ–º–∞–Ω–¥–∞ –∑–∞–º–æ–ª–∫–∞–µ—Ç, –Ω–æ –≤ –∏—Ö –≥–ª–∞–∑–∞—Ö –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–æ.\n\n–°–∞—Ä–∞ –∫–∏–≤–∞–µ—Ç, –Ω–æ –µ—ë –ª–∏—Ü–æ –∫–∞–º–µ–Ω–Ω–æ–µ. –ì—Ä–∏—à–∞ –º–æ–ª—á–∞ –∫–∏–≤–∞–µ—Ç. –õ–∏ —Å–º–æ—Ç—Ä–∏—Ç –≤ —Å—Ç–æ—Ä–æ–Ω—É.\n\n–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –Ω–∞ –∫–æ—Ä–∞–±–ª–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω–æ–π.",
        "image": "üò§",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –ú–∞–∫—Å –í–µ–ª–ª",
        "choices": [
            {"text": "–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ç–≤—ë—Ä–¥—É—é –ª–∏–Ω–∏—é", "next": "continue_firm", "stats": {"morale": -20, "team": -15}},
            {"text": "–°–º—è–≥—á–∏—Ç—å –ø–æ–¥—Ö–æ–¥", "next": "soften_approach", "stats": {"morale": 15, "team": 10}},
            {"text": "–î–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ–º–æ—á–∏—è", "next": "delegate_authority", "stats": {"team": 10, "knowledge": 20}}
        ]
    },
    "send_to_posts": {
        "title": "–ë–æ–µ–≤–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å",
        "text": "–í—ã –ø—Ä–∏–∫–∞–∑—ã–≤–∞–µ—Ç–µ –∫–æ–º–∞–Ω–¥–µ –∑–∞–Ω—è—Ç—å –±–æ–µ–≤—ã–µ –ø–æ—Å—Ç—ã. –ö–æ—Ä–∞–±–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏.\n\n–°–∞—Ä–∞ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é, –ì—Ä–∏—à–∞ ‚Äî –∫ –æ—Ä—É–∂–∏—é, –õ–∏ ‚Äî –∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏. –ö–∞–∂–¥—ã–π –∑–∞–Ω–∏–º–∞–µ—Ç —Å–≤–æ—ë –º–µ—Å—Ç–æ.\n\n–¢—Ä–µ–≤–æ–∂–Ω–∞—è —Å–∏—Ä–µ–Ω–∞ –Ω–∞–ø–æ–ª–Ω—è–µ—Ç –∫–æ—Ä–∏–¥–æ—Ä—ã –≠–ª–µ–∏.",
        "image": "üö®",
        "character": "–°–∏—Å—Ç–µ–º–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è",
        "choices": [
            {"text": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã", "next": "check_posts", "stats": {"security": 25, "team": 20}},
            {"text": "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤—è–∑—å —Å –∫–æ–º–∞–Ω–¥–æ–π", "next": "establish_comm", "stats": {"team": 20, "knowledge": 15}},
            {"text": "–ì–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —Ö—É–¥—à–µ–º—É", "next": "prepare_worst", "stats": {"security": 30, "danger": 20}}
        ]
    },
    "battle_stations": {
        "title": "–ë–æ–µ–≤–∞—è —Ç—Ä–µ–≤–æ–≥–∞",
        "text": "–í—ã –ø–æ–¥–Ω–∏–º–∞–µ—Ç–µ –±–æ–µ–≤—É—é –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å. –û—Ä—É–¥–∏—è –∑–∞—Ä—è–∂–∞—é—Ç—Å—è, —â–∏—Ç—ã –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è, –¥–≤–∏–≥–∞—Ç–µ–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ —Ä–µ–∂–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏.\n\n–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è. –≠—Ç–æ –æ–≥—Ä–æ–º–Ω—ã–π –∫—Ä–µ–π—Å–µ—Ä –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –ï–≥–æ –æ—Ä—É–∂–∏–µ –Ω–∞—Ü–µ–ª–µ–Ω–æ –Ω–∞ –≤–∞—Å.\n\n–°–≤—è–∑—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∏–≥–Ω–∞–ª.",
        "image": "‚öîÔ∏è",
        "character": "–ì—Ä–∏—à–∞ –†–æ–º–∞–Ω–æ–≤",
        "choices": [
            {"text": "–û—Ç–∫—Ä—ã—Ç—å –æ–≥–æ–Ω—å", "next": "open_fire", "stats": {"security": 30, "danger": 40}},
            {"text": "–ü–æ–ø—ã—Ç–∞—Ç—å—Å—è —É–±–µ–∂–∞—Ç—å", "next": "try_escape", "stats": {"fuel": -25, "danger": -20}},
            {"text": "–û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Å–∏–≥–Ω–∞–ª", "next": "respond_signal", "stats": {"knowledge": 25, "danger": -10}}
        ]
    },
    "establish_contact": {
        "title": "–ü–æ–ø—ã—Ç–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º. –°–≤—è–∑–∏—Å—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–∏–≥–Ω–∞–ª.\n\n–í –æ—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å—Ç—Ä–∞–Ω–Ω—ã–π —Å–∏–≥–Ω–∞–ª ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–º–≤–æ–ª–æ–≤, –ø–æ—Ö–æ–∂–∏—Ö –Ω–∞ —Ç–µ, —á—Ç–æ –Ω–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–µ.\n\n–õ–∏ –±–ª–µ–¥–Ω–µ–µ—Ç: '–≠—Ç–æ —è–∑—ã–∫ –î—Ä–µ–≤–Ω–∏—Ö...'",
        "image": "üì°",
        "character": "–°–∞—Ä–∞ –ù–æ–≤–∞",
        "choices": [
            {"text": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ —Ç–æ–º –∂–µ —è–∑—ã–∫–µ", "next": "respond_language", "stats": {"knowledge": 35, "psychic": 25}},
            {"text": "–ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å —Å–≤—è–∑—å", "next": "break_comm", "stats": {"security": 20, "danger": -15}},
            {"text": "–ü—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –õ–∏", "next": "consult_li", "stats": {"psychic": 30, "knowledge": 20}}
        ]
    },
    "hyperspace_escape": {
        "title": "–ü—Ä—ã–∂–æ–∫ –≤ –≥–∏–ø–µ—Ä–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ",
        "text": "–í—ã –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç–µ –≥–∏–ø–µ—Ä–¥–≤–∏–≥–∞—Ç–µ–ª–∏ –∏ —Å–æ–≤–µ—Ä—à–∞–µ—Ç–µ –ø—Ä—ã–∂–æ–∫ –≤ –≥–∏–ø–µ—Ä–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ. –ó–≤–µ–∑–¥—ã –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ä–∞–∑–º—ã—Ç—ã–µ –ª–∏–Ω–∏–∏.\n\n–ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –≤—ã –≤—ã—Ö–æ–¥–∏—Ç–µ –∏–∑ –ø—Ä—ã–∂–∫–∞ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Å–µ–∫—Ç–æ—Ä–µ. –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç –Ω–µ –ø—Ä–µ—Å–ª–µ–¥—É–µ—Ç –≤–∞—Å.\n\n–ù–æ —Ç–µ–ø–µ—Ä—å –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π —á–∞—Å—Ç–∏ –≥–∞–ª–∞–∫—Ç–∏–∫–∏.",
        "image": "üåå",
        "character": "–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞",
        "choices": [
            {"text": "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ–∫—Ç–æ—Ä", "next": "explore_sector", "stats": {"knowledge": 30, "fuel": -15}},
            {"text": "–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –∑–Ω–∞–∫–æ–º—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã", "next": "return_routes", "stats": {"fuel": -20, "danger": -25}},
            {"text": "–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Ç–Ω–æ—Å—Ç—å", "next": "scan_area", "stats": {"knowledge": 25, "psychic": 20}}
        ]
    },
    "join_defense": {
        "title": "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –æ–±–æ—Ä–æ–Ω–µ",
        "text": "–í—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç–µ—Å—å –∫ –æ—Ö—Ä–∞–Ω–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –í–º–µ—Å—Ç–µ —Å –±–æ–µ–≤—ã–º–∏ –æ—Ñ–∏—Ü–µ—Ä–∞–º–∏ –≤—ã –æ—Ç—Ä–∞–∂–∞–µ—Ç–µ –∞—Ç–∞–∫—É –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–æ–≤.\n\n–ë–ª–∞–≥–æ–¥–∞—Ä—è –≤–∞—à–µ–º—É —É—á–∞—Å—Ç–∏—é, –∞—Ç–∞–∫–∞ –æ—Ç–±–∏—Ç–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–æ—Ç–µ—Ä—è–º–∏. –û–¥–∏–Ω –∏–∑ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–æ–≤ –∑–∞—Ö–≤–∞—á–µ–Ω –∂–∏–≤—ã–º.",
        "image": "üî´",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –ú–∞–∫—Å –í–µ–ª–ª",
        "choices": [
            {"text": "–î–æ–ø—Ä–æ—Å–∏—Ç—å –ø–ª–µ–Ω–Ω–æ–≥–æ", "next": "interrogate_prisoner", "stats": {"knowledge": 30, "security": 20}},
            {"text": "–£—Å–∏–ª–∏—Ç—å –æ—Ö—Ä–∞–Ω—É", "next": "enhance_security", "stats": {"security": 35, "danger": -20}},
            {"text": "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é", "next": "analyze_situation", "stats": {"knowledge": 25, "team": 15}}
        ]
    },
    "flank_attackers": {
        "title": "–ê—Ç–∞–∫–∞ —Å —Ñ–ª–∞–Ω–≥–∞",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –æ–±–æ–π—Ç–∏ –∞—Ç–∞–∫—É—é—â–∏—Ö —Å —Ç—ã–ª–∞. –ü—Ä–æ–±—Ä–∞–≤—à–∏—Å—å —á–µ—Ä–µ–∑ —Å–ª—É–∂–µ–±–Ω—ã–µ —Ç–æ–Ω–Ω–µ–ª–∏, –≤—ã –∑–∞—Å—Ç–∞—ë—Ç–µ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–æ–≤ –≤—Ä–∞—Å–ø–ª–æ—Ö.\n\n–ë–ª–∞–≥–æ–¥–∞—Ä—è –≤–∞—à–µ–º—É –≤–Ω–µ–∑–∞–ø–Ω–æ–º—É –Ω–∞–ø–∞–¥–µ–Ω–∏—é, –∞—Ç–∞–∫–∞ –æ—Ç–±–∏—Ç–∞. –û–¥–∏–Ω –∏–∑ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–æ–≤ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–±–µ–∂–∞—Ç—å, –Ω–æ –∑–∞—Ö–≤–∞—á–µ–Ω.",
        "image": "‚öîÔ∏è",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –ú–∞–∫—Å –í–µ–ª–ª",
        "choices": [
            {"text": "–ò–∑—É—á–∏—Ç—å –ø–ª–µ–Ω–Ω–æ–≥–æ", "next": "study_captive", "stats": {"knowledge": 25, "security": 20}},
            {"text": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ", "next": "check_vault", "stats": {"security": 30, "knowledge": 15}},
            {"text": "–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ", "next": "conduct_investigation", "stats": {"knowledge": 35, "team": 20}}
        ]
    },
    "emergency_protocol": {
        "title": "–ê–≤–∞—Ä–∏–π–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª",
        "text": "–í—ã –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç–µ –∞–≤–∞—Ä–∏–π–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª. –•—Ä–∞–Ω–∏–ª–∏—â–µ –∏–∑–æ–ª–∏—Ä—É–µ—Ç—Å—è, –≤—Å–µ –¥–æ—Å—Ç—É–ø—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è, –∞ —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º.\n\n–ê—Ç–∞–∫–∞ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è. –ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–∏ –Ω–µ –º–æ–≥—É—Ç –ø—Ä–æ–Ω–∏–∫–Ω—É—Ç—å –≤–Ω—É—Ç—Ä—å. –ù–æ —Ç–µ–ø–µ—Ä—å –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å, –∫—Ç–æ –æ–Ω–∏ –∏ –∑–∞—á–µ–º –ø—Ä–∏—à–ª–∏.",
        "image": "‚ö†Ô∏è",
        "character": "–°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
        "choices": [
            {"text": "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏ –∫–∞–º–µ—Ä", "next": "analyze_cameras", "stats": {"knowledge": 30, "security": 20}},
            {"text": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", "next": "check_security", "stats": {"security": 35, "knowledge": 15}},
            {"text": "–û–ø–æ–≤–µ—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É", "next": "alert_crew", "stats": {"team": 25, "morale": 10}}
        ]
    },
    "share_visions": {
        "title": "–î–µ–ª–∏—Ç—å—Å—è –≤–∏–¥–µ–Ω–∏—è–º–∏",
        "text": "–í—ã –¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º–∏ –≤–∏–¥–µ–Ω–∏—è–º–∏ —Å –∫–æ–º–∞–Ω–¥–æ–π. –°–∞—Ä–∞ –∑–∞–∏–Ω—Ç—Ä–∏–≥–æ–≤–∞–Ω–∞ –Ω–∞—É—á–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π –æ—Ç–∫—Ä–æ–≤–µ–Ω–∏–π. –ì—Ä–∏—à–∞ –æ–±–µ—Å–ø–æ–∫–æ–µ–Ω –≤–æ–µ–Ω–Ω–æ–π —É–≥—Ä–æ–∑–æ–π. –õ–∏ –∫–∏–≤–∞–µ—Ç ‚Äî –æ–Ω–∞ –∑–Ω–∞–ª–∞ –æ–± —ç—Ç–æ–º.\n\n–ö–æ–º–∞–Ω–¥–∞ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏—Å—Ç–∏–Ω–Ω–æ–π –ø—Ä–∏—Ä–æ–¥—ã –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –≤–æ–∑–º–æ–∂–Ω–æ–π –æ–ø–∞—Å–Ω–æ—Å—Ç–∏.",
        "image": "üëÅÔ∏è",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –ú–∞–∫—Å –í–µ–ª–ª",
        "choices": [
            {"text": "–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π", "next": "develop_plan", "stats": {"team": 30, "knowledge": 25}},
            {"text": "–ò–∑—É—á–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≥–ª—É–±–∂–µ", "next": "deep_study", "stats": {"knowledge": 40, "psychic": 20}},
            {"text": "–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —Ö—É–¥—à–µ–º—É", "next": "prepare_for_worst", "stats": {"security": 30, "danger": 20}}
        ]
    },
    "hide_knowledge": {
        "title": "–°–∫—Ä—ã—Ç—å –∑–Ω–∞–Ω–∏—è",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ —Å–∫—Ä—ã—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è. –≠—Ç–æ —Å–ª–∏—à–∫–æ–º –æ–ø–∞—Å–Ω–æ, —á—Ç–æ–±—ã –¥–µ–ª–∏—Ç—å—Å—è –∏–º–∏ —Å –∫–µ–º-–ª–∏–±–æ.\n\n–ù–æ –õ–∏ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –≤–∞—Å —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º. '–í—ã —Å–¥–µ–ª–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä, –∫–∞–ø–∏—Ç–∞–Ω. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–Ω–∞–Ω–∏—è –º–æ–≥—É—Ç —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å —Ç–µ—Ö, –∫—Ç–æ –∏—Ö –ø–æ–ª—É—á–∏—Ç.'\n\n–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ, —á—Ç–æ –æ–¥–Ω–∞–∂–¥—ã –ø—Ä–∏–¥—ë—Ç—Å—è –ø—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ.",
        "image": "ü§´",
        "character": "–õ–∏ –ß–∂—ç–Ω—å",
        "choices": [
            {"text": "–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–∞–≤–¥—É", "next": "continue_hiding", "stats": {"psychic": 25, "trust": -20}},
            {"text": "–î–æ–≤–µ—Ä–∏—Ç—å—Å—è –õ–∏", "next": "trust_li_secret", "stats": {"psychic": 30, "trust": 35}},
            {"text": "–ò–∑—É—á–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤—Ç–∞–π–Ω–µ", "next": "secret_study", "stats": {"knowledge": 35, "psychic": 25}}
        ]
    },
    "study_artifact": {
        "title": "–ò–∑—É—á–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–∑—É—á–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞. –ö–∞–∂–¥–æ–µ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ –¥–∞—ë—Ç –Ω–æ–≤—ã–µ –≤–∏–¥–µ–Ω–∏—è.\n\n–í—ã –≤–∏–¥–∏—Ç–µ, –∫–∞–∫ –î—Ä–µ–≤–Ω–∏–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏ –ø–æ—Ä—Ç–∞–ª—ã –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏, –∫–∞–∫ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –≤–æ –≤—Ä–µ–º–µ–Ω–∏.\n\n–ù–æ —Ç–∞–∫–∂–µ –≤—ã –≤–∏–¥–∏—Ç–µ, –∫–∞–∫ –æ–¥–Ω–∞ —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—è –±—ã–ª–∞ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–º.",
        "image": "üîÆ",
        "character": "–ê—Ä—Ç–µ—Ñ–∞–∫—Ç",
        "choices": [
            {"text": "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã", "next": "stop_experiments", "stats": {"morale": 20, "danger": -25}},
            {"text": "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è", "next": "continue_research", "stats": {"knowledge": 45, "danger": 30}},
            {"text": "–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç", "next": "isolate_artifact", "stats": {"security": 40, "danger": -20}}
        ]
    },
    "trust_pirates": {
        "title": "–î–æ–≤–µ—Ä–∏–µ –ø–∏—Ä–∞—Ç–∞–º",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –¥–æ–≤–µ—Ä—è—Ç—å –ø–∏—Ä–∞—Ç–∞–º. –û–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Å–≤–æ—é —á–∞—Å—Ç—å —Å–¥–µ–ª–∫–∏, –ø–æ–º–æ–≥–∞—è –∑–∞—â–∏—Ç–∏—Ç—å —Å—Ç–∞–Ω—Ü–∏—é.\n\n–ö–æ–≥–¥–∞ –ø–∏—Ä–∞—Ç—Å–∫–∏–π —Ñ–ª–æ—Ç –ø—Ä–∏–±—ã–≤–∞–µ—Ç, –æ–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤—Å—Ç—É–ø–∞—é—Ç –≤ –±–æ–π –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å—Ç–∞–Ω—Ü–∏–∏.\n\n–ü–æ–±–µ–¥–∞ –æ–¥–µ—Ä–∂–∞–Ω–∞, –Ω–æ –≤–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –≤–∞—Å —Å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ–º.",
        "image": "üè¥‚Äç‚ò†Ô∏è",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –†–æ–∫—Å",
        "choices": [
            {"text": "–û–±—ä—è—Å–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–µ", "next": "explain_decision", "stats": {"team": 20, "morale": 15}},
            {"text": "–û–ø—Ä–∞–≤–¥–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è", "next": "justify_actions", "stats": {"morale": -10, "trust": -15}},
            {"text": "–ü—Ä–∏–Ω—è—Ç—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è", "next": "accept_consequences", "stats": {"morale": -20, "team": -25}}
        ]
    },
    "prepare_betrayal": {
        "title": "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É",
        "text": "–í—ã –≥–æ—Ç–æ–≤–∏—Ç–µ—Å—å –∫ –≤–æ–∑–º–æ–∂–Ω–æ–º—É –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –ø–∏—Ä–∞—Ç–æ–≤. –ì—Ä–∏—à–∞ —Ä–∞–∑–º–µ—â–∞–µ—Ç —Å–≤–æ–∏—Ö –ª—é–¥–µ–π –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö —Ç–æ—á–∫–∞—Ö.\n\n–ö–æ–≥–¥–∞ –ø–∏—Ä–∞—Ç—Å–∫–∏–π —Ñ–ª–æ—Ç –ø—Ä–∏–±—ã–≤–∞–µ—Ç, –æ–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—ã—Ç–∞—é—Ç—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å —Å—Ç–∞–Ω—Ü–∏—é.\n\n–ù–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –≤–∞—à–µ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ, –∏—Ö –ø–ª–∞–Ω –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è. –°—Ç–∞–Ω—Ü–∏—è –∑–∞—â–∏—â–µ–Ω–∞.",
        "image": "‚öîÔ∏è",
        "character": "–ì—Ä–∏—à–∞ –†–æ–º–∞–Ω–æ–≤",
        "choices": [
            {"text": "–ê—Ä–µ—Å—Ç–æ–≤–∞—Ç—å –ø–∏—Ä–∞—Ç–æ–≤", "next": "arrest_pirates", "stats": {"security": 35, "morale": 20}},
            {"text": "–í—ã—Å–ª–∞—Ç—å —Å–æ —Å—Ç–∞–Ω—Ü–∏–∏", "next": "expel_pirates", "stats": {"morale": 15, "danger": -20}},
            {"text": "–ó–∞–∫–ª—é—á–∏—Ç—å –Ω–æ–≤—ã–π —Å–æ—é–∑", "next": "new_alliance", "stats": {"team": 25, "trust": 10}}
        ]
    },
    "reconsider_deal": {
        "title": "–ü–µ—Ä–µ—Å–º–æ—Ç—Ä —Å–¥–µ–ª–∫–∏",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–¥–µ–ª–∫—É —Å –ø–∏—Ä–∞—Ç–∞–º–∏. –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –Ω–æ –≤—ã –æ–±—ä—è—Å–Ω—è–µ—Ç–µ —Å–≤–æ—é –ø–æ–∑–∏—Ü–∏—é.\n\n–ö–∞–ø–∏—Ç–∞–Ω –†–æ–∫—Å –Ω–µ–¥–æ–≤–æ–ª–µ–Ω, –Ω–æ —Å–æ–≥–ª–∞—à–∞–µ—Ç—Å—è –Ω–∞ –Ω–æ–≤—ã–µ —É—Å–ª–æ–≤–∏—è.\n\n–ù–æ–≤–∞—è —Å–¥–µ–ª–∫–∞ –±–æ–ª–µ–µ –≤—ã–≥–æ–¥–Ω–∞ –¥–ª—è —Å—Ç–∞–Ω—Ü–∏–∏ –∏ –º–µ–Ω–µ–µ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–∞ –¥–ª—è –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã.",
        "image": "ü§ù",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –ú–∞–∫—Å –í–µ–ª–ª",
        "choices": [
            {"text": "–£—Ç–≤–µ—Ä–¥–∏—Ç—å –Ω–æ–≤—ã–µ —É—Å–ª–æ–≤–∏—è", "next": "approve_terms", "stats": {"money": 20, "morale": 15}},
            {"text": "–î–æ–±–∞–≤–∏—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏–∏", "next": "add_guarantees", "stats": {"security": 25, "trust": 20}},
            {"text": "–û—Ç–º–µ–Ω–∏—Ç—å —Å–¥–µ–ª–∫—É", "next": "cancel_deal", "stats": {"morale": -10, "danger": 15}}
        ]
    },
    "hurry_evacuation": {
        "title": "–°–ø–µ—à–Ω–∞—è —ç–≤–∞–∫—É–∞—Ü–∏—è",
        "text": "–í—ã —É—Å–∫–æ—Ä—è–µ—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å —ç–≤–∞–∫—É–∞—Ü–∏–∏. –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–µ –±—ã—Å—Ç—Ä–æ –ø–æ–∫–∏–¥–∞—é—Ç —Å—Ç–∞–Ω—Ü–∏—é.\n\n–ü–∏—Ä–∞—Ç—Å–∫–∏–π —Ñ–ª–æ—Ç –ø—Ä–∏–±—ã–≤–∞–µ—Ç, –Ω–æ –∑–∞—Å—Ç–∞—ë—Ç –ø–æ—á—Ç–∏ –ø—É—Å—Ç—É—é —Å—Ç–∞–Ω—Ü–∏—é.\n\n–û–Ω–∏ —Ä–∞–∑–≥–Ω–µ–≤–∞–Ω—ã –∏ –Ω–∞—á–∏–Ω–∞—é—Ç –∞—Ç–∞–∫–æ–≤–∞—Ç—å –∑–≤–µ–∑–¥–æ–ª—ë—Ç –≠–ª–µ—è.",
        "image": "üö®",
        "character": "–°–∏—Å—Ç–µ–º–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è",
        "choices": [
            {"text": "–í—Å—Ç—É–ø–∏—Ç—å –≤ –±–æ–π", "next": "engage_battle", "stats": {"security": 30, "danger": 35}},
            {"text": "–°–∫—Ä—ã—Ç—å—Å—è", "next": "flee", "stats": {"fuel": -25, "danger": -20}},
            {"text": "–ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è", "next": "try_negotiate", "stats": {"knowledge": 25, "danger": -10}}
        ]
    },
    "stay_and_fight": {
        "title": "–û—Å—Ç–∞—Ç—å—Å—è –∏ —Å—Ä–∞–∂–∞—Ç—å—Å—è",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –æ—Å—Ç–∞—Ç—å—Å—è –∏ —Å—Ä–∞–∂–∞—Ç—å—Å—è. –ö–æ–º–∞–Ω–¥–∞ –≥–æ—Ç–æ–≤–∞, –æ—Ä—É–∂–∏–µ –∑–∞—Ä—è–∂–µ–Ω–æ.\n\n–ü–∏—Ä–∞—Ç—Å–∫–∏–π —Ñ–ª–æ—Ç –≤—Å—Ç—É–ø–∞–µ—Ç –≤ –±–æ–π. –°—Ä–∞–∂–µ–Ω–∏–µ –∂–µ—Å—Ç–æ–∫–æ–µ, –Ω–æ –≤–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—è–≤–ª—è–µ—Ç –≥–µ—Ä–æ–∏–∑–º.\n\n–ü–æ–±–µ–¥–∞ –æ–¥–µ—Ä–∂–∞–Ω–∞, –Ω–æ —Ü–µ–Ω–∞ –≤–µ–ª–∏–∫–∞.",
        "image": "‚öîÔ∏è",
        "character": "–ì—Ä–∏—à–∞ –†–æ–º–∞–Ω–æ–≤",
        "choices": [
            {"text": "–û–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å —Ä–∞–Ω–µ–Ω—ã–º", "next": "help_wounded", "stats": {"morale": 25, "team": 30}},
            {"text": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è", "next": "check_damage", "stats": {"knowledge": 20, "security": 15}},
            {"text": "–ü—Ä–µ—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç—Å—Ç—É–ø–∞—é—â–∏—Ö", "next": "pursue_retreat", "stats": {"security": 30, "danger": 20}}
        ]
    },
    "negotiate": {
        "title": "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è —Å –ø–∏—Ä–∞—Ç–∞–º–∏. –û—Ç–∫—Ä—ã—Ç–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω–∞—è –ª–∏–Ω–∏—è.\n\n–ö–∞–ø–∏—Ç–∞–Ω –†–æ–∫—Å –æ—Ç–≤–µ—á–∞–µ—Ç. –ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–µ, –Ω–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ –æ–±—â–∏–π —è–∑—ã–∫.\n\n–ü–∏—Ä–∞—Ç—ã —Å–æ–≥–ª–∞—à–∞—é—Ç—Å—è –Ω–∞ –º–∏—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –°—Ç–∞–Ω—Ü–∏—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.",
        "image": "ü§ù",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –†–æ–∫—Å",
        "choices": [
            {"text": "–ó–∞–∫–ª—é—á–∏—Ç—å –º–∏—Ä", "next": "make_peace", "stats": {"morale": 30, "danger": -35}},
            {"text": "–¢—Ä–µ–±–æ–≤–∞—Ç—å –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—é", "next": "demand_compensation", "stats": {"money": 40, "morale": 10}},
            {"text": "–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–æ—é–∑", "next": "offer_alliance", "stats": {"team": 25, "trust": 30}}
        ]
    },
    "take_artifact": {
        "title": "–ü—Ä–∏–Ω—è—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç",
        "text": "–í—ã –±–µ—Ä—ë—Ç–µ –≤—Ç–æ—Ä–æ–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç. –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤–∞—à —Ä–∞–∑—É–º –Ω–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–Ω–∞–Ω–∏—è–º–∏ –•—Ä–∞–Ω–∏—Ç–µ–ª–µ–π.\n\n–í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã ‚Äî —ç—Ç–æ –∫–ª—é—á–∏ –∫ —Å–∏—Å—Ç–µ–º–µ –∑–∞—â–∏—Ç—ã, —Å–æ–∑–¥–∞–Ω–Ω–æ–π –î—Ä–µ–≤–Ω–∏–º–∏.\n\n–ù–æ —Ç–∞–∫–∂–µ –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –±–æ–ª—å—à–æ–π –æ–ø–∞—Å–Ω–æ—Å—Ç–∏.",
        "image": "üîÆ",
        "character": "–ê—Ä—Ç–µ—Ñ–∞–∫—Ç",
        "choices": [
            {"text": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞–Ω–∏—è –¥–ª—è –∑–∞—â–∏—Ç—ã", "next": "use_knowledge", "stats": {"knowledge": 40, "security": 30}},
            {"text": "–ò–∑—É—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∑–∞—â–∏—Ç—ã", "next": "study_defense", "stats": {"knowledge": 45, "psychic": 25}},
            {"text": "–ü—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥—É", "next": "warn_crew", "stats": {"team": 30, "morale": 20}}
        ]
    },
    "refuse_artifact": {
        "title": "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞",
        "text": "–í—ã –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç–µ—Å—å –±—Ä–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç. –õ–∏ –∫–∏–≤–∞–µ—Ç —Å —É–≤–∞–∂–µ–Ω–∏–µ–º.\n\n'–í—ã –º—É–¥—Ä—ã, –∫–∞–ø–∏—Ç–∞–Ω. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –±—Ä–µ–º–µ–Ω–∞ –Ω–µ –¥–æ–ª–∂–Ω—ã –ª–æ–∂–∏—Ç—å—Å—è –Ω–∞ –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞.'\n\n–û–Ω–∞ —É–±–∏—Ä–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç. –í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –æ–±–ª–µ–≥—á–µ–Ω–∏–µ, –Ω–æ —Ç–∞–∫–∂–µ –∏ —Å–æ–∂–∞–ª–µ–Ω–∏–µ.",
        "image": "üôè",
        "character": "–õ–∏ –ß–∂—ç–Ω—å",
        "choices": [
            {"text": "–î–æ–≤–µ—Ä–∏—Ç—å –∑–∞—â–∏—Ç—É –õ–∏", "next": "trust_li_protection", "stats": {"trust": 35, "psychic": 20}},
            {"text": "–ù–∞–π—Ç–∏ –¥—Ä—É–≥–æ–µ —Ä–µ—à–µ–Ω–∏–µ", "next": "find_solution", "stats": {"knowledge": 30, "team": 25}},
            {"text": "–ò–∑—É—á–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ", "next": "study_vault", "stats": {"knowledge": 35, "security": 20}}
        ]
    },
    "consult_crew": {
        "title": "–°–æ–≤–µ—Ç —Å –∫–æ–º–∞–Ω–¥–æ–π",
        "text": "–í—ã —Ä–µ—à–∞–µ—Ç–µ –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –∫–æ–º–∞–Ω–¥–æ–π. –í —Ü–µ–Ω—Ç—Ä–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤—Å–µ.\n\n–°–∞—Ä–∞: '–° –Ω–∞—É—á–Ω–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è, —ç—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å.'\n\n–ì—Ä–∏—à–∞: '–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —ç—Ç–æ –æ–≥—Ä–æ–º–Ω—ã–π —Ä–∏—Å–∫.'\n\n–õ–∏: '–°—É–¥—å–±–∞ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞ –≤ –≤–∞—à–∏—Ö —Ä—É–∫–∞—Ö, –∫–∞–ø–∏—Ç–∞–Ω.'",
        "image": "üë•",
        "character": "–ö–∞–ø–∏—Ç–∞–Ω –ú–∞–∫—Å –í–µ–ª–ª",
        "choices": [
            {"text": "–°–ª–µ–¥–æ–≤–∞—Ç—å —Å–æ–≤–µ—Ç—É –°–∞—Ä—ã", "next": "follow_sara", "stats": {"knowledge": 30, "morale": 15}},
            {"text": "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ì—Ä–∏—à—É", "next": "support_grisha", "stats": {"security": 30, "team": 20}},
            {"text": "–î–æ–≤–µ—Ä–∏—Ç—å—Å—è –õ–∏", "next": "trust_li_final", "stats": {"psychic": 35, "trust": 30}}
        ]
    }
}

# –ü–µ—Ä—Å–æ–Ω–∞–∂–∏
CHARACTERS: Dict[str, dict] = {
    "sara_nova": {
        "name": "–°–∞—Ä–∞ –ù–æ–≤–∞",
        "role": "–ì–ª–∞–≤–Ω—ã–π –Ω–∞—É—á–Ω—ã–π –æ—Ñ–∏—Ü–µ—Ä",
        "relationship": 50,
        "description": "–•–æ–ª–æ–¥–Ω–∞—è, —Ä–∞—Å—á—ë—Ç–ª–∏–≤–∞—è, –Ω–æ —Å –¥–æ–±—Ä—ã–º —Å–µ—Ä–¥—Ü–µ–º"
    },
    "grisha_romanov": {
        "name": "–ì—Ä–∏—à–∞ –†–æ–º–∞–Ω–æ–≤",
        "role": "–ë–æ–µ–≤–æ–π –æ—Ñ–∏—Ü–µ—Ä",
        "relationship": 60,
        "description": "–í–µ—Ä–Ω—ã–π –±–æ–µ—Ü, –æ–ø—ã—Ç–Ω—ã–π –≤–æ–∏–Ω"
    },
    "li_zheng": {
        "name": "–õ–∏ –ß–∂—ç–Ω—å",
        "role": "–ù–∞–≤–∏–≥–∞—Ç–æ—Ä",
        "relationship": 45,
        "description": "–ó–∞–≥–∞–¥–æ—á–Ω–∞—è, —Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –¥—Ä–µ–≤–Ω–∏—Ö —Ç–∞–π–Ω"
    }
}

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–≥—Ä–æ–∫–æ–≤ –≤ –ø–∞–º—è—Ç–∏
game_progress: Dict[str, dict] = {}

# ============================================================================
# LIFESPAN - –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò –ó–ê–í–ï–†–®–ï–ù–ò–ï
# ============================================================================


@asynccontextmanager
async def lifespan(app: FastAPI):
    """–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    logger.info("=" * 80)
    logger.info(f"üöÄ {settings.app_name} Backend –∑–∞–ø—É—â–µ–Ω")
    logger.info("=" * 80)
    logger.info(f"üåç –û–∫—Ä—É–∂–µ–Ω–∏–µ: {settings.environment}")
    logger.info(f"üêõ Debug: {settings.debug}")
    logger.info(f"üìä –ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å—Ü–µ–Ω: {len(SCENES)}")
    logger.info(f"üë• –ó–∞–≥—Ä—É–∂–µ–Ω–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π: {len(CHARACTERS)}")
    logger.info(f"üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: {settings.database_type}")
    logger.info(f"‚ö° –ö—ç—à: {settings.cache_type} (–≤–∫–ª—é—á–µ–Ω: {settings.cache_enabled})")
    logger.info(f"üîê Auth: {settings.auth_enabled}")
    logger.info(f"üì° CORS origins: {len(settings.cors_origins_list)} –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤")
    logger.info(f"üìö API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: {settings.docs_url if settings.docs_enabled else '–æ—Ç–∫–ª—é—á–µ–Ω–∞'}")
    logger.info("=" * 80)
    
    yield
    
    # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
    logger.info("üõë –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...")
    logger.info(f"üìä –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π: {len(game_progress)}")


# ============================================================================
# –°–û–ó–î–ê–ù–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
# ============================================================================

app = FastAPI(
    title=settings.app_name,
    description="–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Ç–µ–∫—Å—Ç–æ–≤–∞—è RPG –≤ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π —Ç–µ–º–∞—Ç–∏–∫–µ",
    version=settings.app_version,
    docs_url=settings.docs_url if settings.docs_enabled else None,
    redoc_url=settings.redoc_url if settings.redoc_enabled else None,
    openapi_url=settings.openapi_url if settings.docs_enabled else None,
    lifespan=lifespan
)

# ============================================================================
# MIDDLEWARE - CORS
# ============================================================================

app.add_middleware(
    CORSMiddleware,
    allow_origins=settings.cors_origins_list,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

logger.info(f"‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è {len(settings.cors_origins_list)} –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤")

# ============================================================================
# EXCEPTION HANDLERS
# ============================================================================


@app.exception_handler(HTTPException)
async def http_exception_handler(request, exc):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ HTTP –∏—Å–∫–ª—é—á–µ–Ω–∏–π"""
    logger.error(f"‚ùå HTTP Exception ({exc.status_code}): {exc.detail}")
    return JSONResponse(
        status_code=exc.status_code,
        content={"error": exc.detail}
    )


@app.exception_handler(Exception)
async def general_exception_handler(request, exc):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±—â–∏—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π"""
    logger.error(f"‚ùå –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: {str(exc)}", exc_info=True)
    return JSONResponse(
        status_code=500,
        content={"error": "Internal server error"}
    )

# ============================================================================
# ENDPOINTS
# ============================================================================

# -------- Health Check --------


@app.get("/health", response_model=HealthCheckResponse, tags=["System"])
async def health_check():
    """
    Health check endpoint
    
    –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞
    """
    logger.debug("Health check –∑–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–µ–Ω")
    return {
        "status": "healthy",
        "version": settings.app_version,
        "environment": settings.environment,
        "timestamp": datetime.now().isoformat()
    }

# -------- Game Endpoints --------


@app.post("/api/game/start", response_model=GameStartResponse, tags=["Game"])
async def start_game(request: GameStartRequest):
    """
    –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É
    
    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–≥—Ä–æ–≤—É—é —Å–µ—Å—Å–∏—é –¥–ª—è –∏–≥—Ä–æ–∫–∞ —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    """
    try:
        player_id = request.player_id
        
        logger.info(f"üéÆ –ü–æ–ø—ã—Ç–∫–∞ –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É –¥–ª—è –∏–≥—Ä–æ–∫–∞: {player_id}")
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤
        if len(game_progress) >= settings.max_active_games:
            logger.warning(f"‚ö†Ô∏è –ú–∞–∫—Å–∏–º—É–º –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä –¥–æ—Å—Ç–∏–≥–Ω—É—Ç: {settings.max_active_games}")
            raise HTTPException(
                status_code=status.HTTP_429_TOO_MANY_REQUESTS,
                detail="–ú–∞–∫—Å–∏–º—É–º –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä –¥–æ—Å—Ç–∏–≥–Ω—É—Ç"
            )
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–≥—Ä–æ–∫–∞
        game_progress[player_id] = {
            'current_scene': 'start',
            'stats': {
                'health': 100,
                'morale': 75,
                'knowledge': 30,
                'team': 50,
                'danger': 0,
                'security': 20,
                'fuel': 100,
                'money': 1000,
                'psychic': 0,
                'trust': 50
            },
            'relationships': {char: CHARACTERS[char]['relationship'] for char in CHARACTERS},
            'inventory': ['–ë—Ä–µ–∫–µ—Ä –∫–æ–¥–æ–≤', '–ë–æ–µ–≤–æ–π –Ω–æ–∂'],
            'choices_made': 0,
            'created_at': datetime.now().isoformat()
        }
        
        logger.info(f"‚úÖ –ò–≥—Ä–∞ –Ω–∞—á–∞—Ç–∞ –¥–ª—è –∏–≥—Ä–æ–∫–∞: {player_id}")
        logger.debug(f"üìä –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π: {len(game_progress)}/{settings.max_active_games}")
        
        return {
            "status": "success",
            "scene": get_scene_data('start'),
            "stats": game_progress[player_id]['stats'],
            "relationships": game_progress[player_id]['relationships']
        }
    except HTTPException:
        raise
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –∏–≥—Ä—ã: {str(e)}", exc_info=True)
        raise HTTPException(
            status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
            detail="–û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –∏–≥—Ä—ã"
        )


@app.get("/api/game/scene/{scene_id}", response_model=SceneResponse, tags=["Game"])
async def get_scene(scene_id: str):
    """
    –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–µ
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ü–µ–Ω—ã –ø–æ ID
    """
    logger.debug(f"–ó–∞–ø—Ä–æ—Å —Å—Ü–µ–Ω—ã: {scene_id}")
    
    if scene_id not in SCENES:
        logger.warning(f"‚ö†Ô∏è –°—Ü–µ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {scene_id}")
        raise HTTPException(
            status_code=status.HTTP_404_NOT_FOUND,
            detail=f"–°—Ü–µ–Ω–∞ '{scene_id}' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
        )
    
    return get_scene_data(scene_id)


@app.post("/api/game/choose", response_model=GameChoiceResponse, tags=["Game"])
async def make_choice(request: GameChoiceRequest):
    """
    –°–¥–µ–ª–∞—Ç—å –≤—ã–±–æ—Ä –≤ –∏–≥—Ä–µ
    
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –∏–≥—Ä–æ–∫–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ü–µ–Ω—É
    """
    try:
        player_id = request.player_id
        next_scene = request.next_scene
        stats_changes = request.stats or {}
        
        logger.debug(f"–í—ã–±–æ—Ä –æ—Ç –∏–≥—Ä–æ–∫–∞ {player_id}: –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ü–µ–Ω—É {next_scene}")
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∏–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å
        if player_id not in game_progress:
            logger.warning(f"‚ö†Ô∏è –ò–≥—Ä–∞ –Ω–µ –Ω–∞—á–∞–ª–∞—Å—å –¥–ª—è –∏–≥—Ä–æ–∫–∞: {player_id}")
            raise HTTPException(
                status_code=status.HTTP_404_NOT_FOUND,
                detail="–ò–≥—Ä–∞ –Ω–µ –Ω–∞—á–∞—Ç–∞"
            )
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        for key, value in stats_changes.items():
            if key in game_progress[player_id]['stats']:
                old_value = game_progress[player_id]['stats'][key]
                game_progress[player_id]['stats'][key] = max(0, min(100, old_value + value))
                logger.debug(f"  {key}: {old_value} ‚Üí {game_progress[player_id]['stats'][key]}")
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ü–µ–Ω—ã
        game_progress[player_id]['current_scene'] = next_scene
        game_progress[player_id]['choices_made'] += 1
        
        logger.info(f"‚úÖ –ò–≥—Ä–æ–∫ {player_id}: –≤—ã–±–æ—Ä #{game_progress[player_id]['choices_made']} ‚Üí {next_scene}")
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –ø–æ—Ä–∞–∂–µ–Ω–∏—è
        stats = game_progress[player_id]['stats']
        if stats['morale'] <= 0 or stats['health'] <= 0:
            logger.warning(f"‚ùå –ò–≥—Ä–æ–∫ {player_id} –ø—Ä–æ–∏–≥—Ä–∞–ª (morale: {stats['morale']}, health: {stats['health']})")
            return {
                "status": "game_over",
                "reason": "–í—ã –Ω–µ –≤—ã–∂–∏–ª–∏ –≤ –∫–æ—Å–º–æ—Å–µ",
                "choices_made": game_progress[player_id]['choices_made']
            }
        
        return {
            "status": "success",
            "scene": get_scene_data(next_scene),
            "stats": game_progress[player_id]['stats'],
            "relationships": game_progress[player_id]['relationships'],
            "choices_made": game_progress[player_id]['choices_made']
        }
    except HTTPException:
        raise
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ: {str(e)}", exc_info=True)
        raise HTTPException(
            status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
            detail="–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤—ã–±–æ—Ä–∞"
        )


@app.get("/api/game/stats/{player_id}", response_model=PlayerStatsResponse, tags=["Game"])
async def get_player_stats(player_id: str):
    """
    –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä–æ–∫–∞
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ –∏–≥—Ä–æ–∫–∞
    """
    logger.debug(f"–ó–∞–ø—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è –∏–≥—Ä–æ–∫–∞: {player_id}")
    
    if player_id not in game_progress:
        logger.warning(f"‚ö†Ô∏è –ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω: {player_id}")
        raise HTTPException(
            status_code=status.HTTP_404_NOT_FOUND,
            detail="–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω"
        )
    
    progress = game_progress[player_id]
    return {
        "current_scene": progress['current_scene'],
        "stats": progress['stats'],
        "relationships": progress['relationships'],
        "inventory": progress['inventory'],
        "choices_made": progress['choices_made']
    }

# -------- Character Endpoints --------


@app.get("/api/characters", tags=["Characters"])
async def get_all_characters():
    """
    –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–∞—Ö –∏–≥—Ä—ã
    """
    logger.debug(f"–ó–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π: {len(CHARACTERS)} –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π")
    
    return {char_id: {**char_data, "id": char_id} 
            for char_id, char_data in CHARACTERS.items()}


@app.get("/api/characters/{character_id}", response_model=CharacterInfo, tags=["Characters"])
async def get_character(character_id: str):
    """
    –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø–æ ID
    """
    logger.debug(f"–ó–∞–ø—Ä–æ—Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞: {character_id}")
    
    if character_id not in CHARACTERS:
        logger.warning(f"‚ö†Ô∏è –ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω: {character_id}")
        raise HTTPException(
            status_code=status.HTTP_404_NOT_FOUND,
            detail=f"–ü–µ—Ä—Å–æ–Ω–∞–∂ '{character_id}' –Ω–µ –Ω–∞–π–¥–µ–Ω"
        )
    
    char = CHARACTERS[character_id]
    return {
        "id": character_id,
        "name": char['name'],
        "role": char['role'],
        "relationship": char['relationship'],
        "description": char['description']
    }

# -------- Scene Endpoints --------


@app.get("/api/scenes", tags=["Scenes"])
async def list_scenes():
    """
    –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ü–µ–Ω
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ö (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
    """
    logger.debug(f"–ó–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Å—Ü–µ–Ω: {len(SCENES)} —Å—Ü–µ–Ω")
    
    return {scene_id: scene['title'] for scene_id, scene in SCENES.items()}


# -------- Admin Endpoints --------

@app.get("/api/admin/stats", tags=["Admin"])
async def admin_stats():
    """
    –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–µ—Ä–≤–µ—Ä–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏—è—Ö –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    """
    logger.debug("Admin stats –∑–∞–ø—Ä–æ—Å")
    
    if not settings.debug:
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="Admin endpoints –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤ debug —Ä–µ–∂–∏–º–µ"
        )
    
    return {
        "active_sessions": len(game_progress),
        "max_sessions": settings.max_active_games,
        "environment": settings.environment,
        "debug": settings.debug,
        "cache_enabled": settings.cache_enabled,
        "auth_enabled": settings.auth_enabled,
        "total_scenes": len(SCENES),
        "total_characters": len(CHARACTERS),
        "uptime_info": "—Å–º. –≤ –ª–æ–≥–∞—Ö"
    }

# ============================================================================
# ROOT ENDPOINT
# ============================================================================


@app.get("/", tags=["Root"])
async def root():
    """–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ API"""
    logger.debug("Root endpoint –∑–∞–ø—Ä–æ—Å")
    
    return {
        "name": settings.app_name,
        "version": settings.app_version,
        "description": "–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Ç–µ–∫—Å—Ç–æ–≤–∞—è RPG –≤ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π —Ç–µ–º–∞—Ç–∏–∫–µ",
        "environment": settings.environment,
        "docs": settings.docs_url if settings.docs_enabled else None,
        "redoc": settings.redoc_url if settings.redoc_enabled else None,
        "health": "/health",
        "api": {
            "game": "/api/game/start",
            "characters": "/api/characters",
            "scenes": "/api/scenes"
        }
    }

# ============================================================================
# –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
# ============================================================================


def get_scene_data(scene_id: str) -> SceneResponse:
    """
    –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å—Ü–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ SceneResponse
    
    Args:
        scene_id: ID —Å—Ü–µ–Ω—ã
        
    Returns:
        SceneResponse: –î–∞–Ω–Ω—ã–µ —Å—Ü–µ–Ω—ã
    """
    scene = SCENES.get(scene_id, SCENES['start'])
    return SceneResponse(
        id=scene_id,
        title=scene['title'],
        text=scene['text'],
        image=scene['image'],
        character=scene.get('character', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π'),
        choices=[Choice(**choice) for choice in scene['choices']]
    )

# ============================================================================
# –ó–ê–ü–£–°–ö
# ============================================================================


if __name__ == "__main__":
    import uvicorn
    
    logger.info("=" * 80)
    logger.info("üöÄ –ó–∞–ø—É—Å–∫ StarCourier Web Backend")
    logger.info("=" * 80)
    logger.info(f"üìç –ê–¥—Ä–µ—Å: http://{settings.server_host}:{settings.server_port}")
    logger.info(f"üìö API Docs: http://{settings.server_host}:{settings.server_port}{settings.docs_url}")
    logger.info(f"üåç Environment: {settings.environment}")
    logger.info(f"üêõ Debug: {settings.debug}")
    logger.info("=" * 80)
    
    uvicorn.run(
        "main:app",
        host=settings.server_host,
        port=settings.server_port,
        reload=settings.debug,
        log_level=settings.log_level.lower()
    )